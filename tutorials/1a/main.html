
<!-- Step title -->
<h1>Stap 1a</h1>

<!-- Step description -->
<span id="step-1a-description">
  <p> We starten door kennis te maken met if statements. Ze zijn de kern van elk
      programma aangezien ze ons in staat stellen om keuzes te maken. Zo kunnen
      bepaalde acties enkel uitgevoerd worden indien er voldaan is aan
      een vooraf opgelegde voorwaarde. Maak je workspace leeg en probeer zelf eens
      een regel te maken die zegt dat we <b>enkel callen</b> indien het
      <b>preflop</b> is.  </p>
      <div class="ui buttons">
        <button id="step-1a-tips-btn" class="ui green button">
          Toon tip
        </button>
        <div class="or" data-text="of"></div>
        <button id="step-1a-resign-btn" class="ui red button">
          Geef op
        </button>
      </div>
</span>

<!-- Step success -->
<span id="step-1a-success">
  <span class="congrats">Gefeliciteerd!</span>
  <p> De regel die je hebt aangemaakt is inderdaad een die enkel zal callen
      indien het preflop is. Laten we een stap verder gaan en kennis maken met
      geavanceerde if statements. Hier zullen we er ook rekening mee houden wat
      er gaat gebeuren indien de voorwaarde niet voldaan is. Let op, maak je
      workspace nog niet leeg! Je kan deze code waarschijnlijk hergebruiken in
      de volgende stappen.  </p>
      <button class="ui small grey button" onclick="step1AChecker.next()">
        Volgende stap!
      </button>
</span>

<!-- Step fail -->
<span id="step-1a-fail">
  <span class="congrats">Oops!</span>
  <p> We laten jou dan wel de oplossing zien, maar we raden toch aan om deze
      stap opnieuw te proberen. Het is belangrijk dat je de stappen zelf maakt
      om zo vertrouwd te raken met het maken van verschillende regels. </p>
  <div><img id="step-1a-solution-preview" width='150' class="solution" src="tutorials/1a/solution.png" />
  </div>
  <button id="step-1a-restart-btn" class="ui small grey button">
    Probeer opnieuw!
  </button>
</span>

<!-- Step tips -->
<div id="step-1a-tips" class="ui dimmer">
  <div class="content">
    <div class="center">
      <h2 class="ui inverted icon header">
        <i class="help icon"></i>
        Tip
      </h2>
      <p class="diminfo"> Onder 'situaties' vind je een blok dat 'waar' is
          wanneer we preflop zijn. Dit blok is logischerwijs 'is preflop'
          genoemd. Je kan dit gebruiken in combinatie met het if statement.
          Daarna is het ook mogelijk om de call actie in dit if statement te
          slepen. </p>
      <div id="step-1a-hide-tips-btn" class="ui grey button">
        Bedankt!
      </div>
    </div>
  </div>
</div>

<script>

  /**
   *  Shows the description div and hides all others, updates CSS.
   */
  var show1ADescription = function() {
    $('#step-1a-description').show();
    $('#step-1a-success').hide();
    $('#step-1a-fail').hide();
    $('#bargraph').addClass('tutorialinfo');
    $('#bargraph').removeClass('tutorialsuccess');
    $('#bargraph').removeClass('tutorialfailed');
    $('#step-1a-tips').dimmer('hide');
  }

  /**
   *  Shows the success div and hides all others, updates CSS.
   */
  var show1ASuccess = function() {
    $('#step-1a-description').hide();
    $('#step-1a-success').show();
    $('#step-1a-fail').hide();
    $('#bargraph').removeClass('tutorialinfo');
    $('#bargraph').addClass('tutorialsuccess');
    $('#bargraph').removeClass('tutorialfailed');
    $('#step-1a-tips').dimmer('hide');
  }

  /**
   *  Shows the fail div and hides all others, updates CSS.
   */
  var show1AFail = function() {
    $('#step-1a-description').hide();
    $('#step-1a-success').hide();
    $('#step-1a-fail').show();
    $('#bargraph').removeClass('tutorialinfo');
    $('#bargraph').removeClass('tutorialsuccess');
    $('#bargraph').addClass('tutorialfailed');
    $('#step-1a-tips').dimmer('hide');
  }

  /**
   *  Shows the tips view.
   */
  var show1ATips = function() {
    $('#step-1a-tips').dimmer('show');
  }

  /**
   *  Hides the tips view.
   */
  var hide1ATips = function() {
    $('#step-1a-tips').dimmer('hide');
  }

  /**
   *  Checks if the step is completed and makes sure it does not happen
   *  multiple times.
   */
  var step1AChecker = {
    isCompleted: false,
    complete: function() {
      if (!this.isCompleted) {
        if(isFullscreenWorkspace()) { toggleFullscreenWorkspace(); }
        show1ASuccess();
      }
      this.isCompleted = true;
    },
    next: function() {
      show1ADescription();
      $('#bargraph').load('tutorials/1b/main.html');
    }
  }

  /**
   *  Add listener to check if the new blocks are correct for this step.
   */
  var solution1A;
  $.get('tutorials/1a/solution.xml', function(data) {
    solution1A = data;
    workspace.addChangeListener(function () {
      var xml = Blockly.Xml.workspaceToDom(workspace);
      var provided = Blockly.Xml.domToText(xml);
      if (BlockChecker.equals(provided, solution1A)) { step1AChecker.complete(); }
    });
  });

  $('#step-1a-tips-btn').click(function(e) {
    show1ATips();
  });

  $('#step-1a-hide-tips-btn').click(function(e) {
    hide1ATips();
  });

  $('#step-1a-resign-btn').click(function(e) {
    show1AFail();
  });

  $('#step-1a-restart-btn').click(function(e) {
    show1ADescription();
  });

  $('#step-1a-solution-preview').click(function(e) {
    $('#solution-zoom-img').attr('src', 'tutorials/1a/solution.png');
    $('#solution-zoom').dimmer('show');
  });

</script>
