
<!-- Step title -->
<h1>Stap 1c</h1>

<!-- Step description -->
<span id="step-1c-description">
  <p> Je bent aangekomen in het laatste deel van stap 1. We gaan verder op onze
      vorige regel en gaan enkel de voorwaarde aanpassen. Het callen mag enkel
      gebeuren indien we een kaart in onze handen hebben die een <b>Queen of
      hoger</b> is. Er zijn speciale blocks die het mogelijk maken om kaarten
      te definiëren die in je hand moeten zitten. Een kaart bestaat uit een
      rank en een kleur. We moeten dus een block voor de rank gebruiken die
      zegt dat ze <b>groter of gelijk aan een Queen</b> moet zijn. </p>
      <div class="ui buttons">
        <button id="step-1c-tips-btn" class="ui green button">
          Toon tip
        </button>
        <div class="or" data-text="of"></div>
        <button id="step-1c-resign-btn" class="ui red button">
          Geef op
        </button>
      </div>
</span>

<!-- Step success -->
<span id="step-1c-success">
  <span class="congrats">Gefeliciteerd!</span>
  <p> Je hebt net je eerste, op kaarten gebaseerde, situatie gemodeleert en daar
      correct op gereageerd! Op dit moment ben je klaar voor stap twee, waar we
      bepaalde relaties tussen verschillende kaarten zullen definiëren (zoals
      zelfde rank, zelfde kleur, verschillende rank etc). We komen steeds dichter
      en dichter de vaardigheden die je nodig hebt om een echte pokerbot te
      maken! </p>
      <button class="ui small grey button" onclick="step1CChecker.next()">
        Volgende stap!
      </button>
</span>

<!-- Step fail -->
<span id="step-1c-fail">
  <span class="congrats">Oops!</span>
  <p> Probeer het nu eens zelf! </p>
      <div><img width='200' class="solution" src="tutorials/1c/solution.png" />
      </div>
      <button id="step-1c-restart-btn" class="ui small grey button">
        Probeer opnieuw!
      </button>
</span>

<!-- Step tips -->
<div id="step-1c-tips" class="ui dimmer">
  <div class="content">
    <div class="center">
      <h2 class="ui inverted icon header">
        <i class="help icon"></i>
        Tip
      </h2>
      <p class="diminfo"> Onder 'kaarten' vind je een block dat nagaat of
          een bepaald kaart (of meerdere) in je hand zitten of niet. Je kan dit
          combineren met een kaarten-block (bruine block). Het is nu mogelijk
          om hier een block in te zetten dat zegt dat de rank groter of gelijk
          moet zijn aan een Queen! </p>
      <div id="step-1c-hide-tips-btn" class="ui grey button">
        Bedankt!
      </div>
    </div>
  </div>
</div>

<script>

  /**
   *  Shows the description div and hides all others, updates CSS.
   */
  var show1CDescription = function() {
    $('#step-1c-description').show();
    $('#step-1c-success').hide();
    $('#step-1c-fail').hide();
    $('#bargraph').addClass('tutorialinfo');
    $('#bargraph').removeClass('tutorialsuccess');
    $('#bargraph').removeClass('tutorialfailed');
    $('#step-1c-tips').dimmer('hide');
  }

  /**
   *  Shows the success div and hides all others, updates CSS.
   */
  var show1CSuccess = function() {
    $('#step-1c-description').hide();
    $('#step-1c-success').show();
    $('#step-1c-fail').hide();
    $('#bargraph').removeClass('tutorialinfo');
    $('#bargraph').addClass('tutorialsuccess');
    $('#bargraph').removeClass('tutorialfailed');
    $('#step-1c-tips').dimmer('hide');
  }

  /**
   *  Shows the fail div and hides all others, updates CSS.
   */
  var show1CFail = function() {
    $('#step-1c-description').hide();
    $('#step-1c-success').hide();
    $('#step-1c-fail').show();
    $('#bargraph').removeClass('tutorialinfo');
    $('#bargraph').removeClass('tutorialsuccess');
    $('#bargraph').addClass('tutorialfailed');
    $('#step-1c-tips').dimmer('hide');
  }

  /**
   *  Shows the tips view.
   */
  var show1CTips = function() {
    $('#step-1c-tips').dimmer('show');
  }

  /**
   *  Hides the tips view.
   */
  var hide1CTips = function() {
    $('#step-1c-tips').dimmer('hide');
  }

  /**
   *  Checks if the step is completed and makes sure it does not happen
   *  multiple times.
   */
  var step1CChecker = {
    isCompleted: false,
    complete: function() {
      if (!this.isCompleted) show1CSuccess();
        this.isCompleted = true;
    },
    next: function() {
      show1CDescription();
      $('#bargraph').load('tutorials/2/main.html');
    }
  }

  /**
   *  Add listener to check if the new blocks are correct for this step.
   */
  var solution1C;
  $.get('tutorials/1c/solution.xml', function(data) {
    solution1C = data;
    workspace.addChangeListener(function () {
      var xml = Blockly.Xml.workspaceToDom(workspace);
      var provided = Blockly.Xml.domToText(xml);
      if (BlockChecker.equals(provided, solution1C)) { step1CChecker.complete(); }
    });
  });

  $('#step-1c-tips-btn').click(function(e) {
    show1CTips();
  });

  $('#step-1c-hide-tips-btn').click(function(e) {
    hide1CTips();
  });

  $('#step-1c-resign-btn').click(function(e) {
    show1CFail();
  });

  $('#step-1c-restart-btn').click(function(e) {
    show1CDescription();
  });

</script>
