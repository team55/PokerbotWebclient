
<!-- Step title -->
<h1>Stap 4a</h1>

<!-- Step description -->
<span id="step-4a-description">
  <p> Een laatste belangrijke eigenschap van regels is dat wanneer een actie
      uitgevoerd wordt, de hele regel stopt. Dit wil zeggen dat de volgende voorwaarden
      dan niet meer uitgevoerd of nagegaan worden. Stel dus dat in het vorig voorbeeld
      we een paar hebben en er zijn 4 raises voor ons geweest. In dit geval zullen
      we callen en hierna stopt onze regel meteen. Er wordt niet meer gekeken naar
      wat er na deze regel komt. We hebben op dit moment een if statement om na te gaan
      of we een paar hebben. Maak nu hier onder een tweede if statement dat nagaat
      of we <b>three of a kind</b> hebben. In dit geval moet er <b>geraised worden
      naar de stackgrootte</b>. </p>
      <div class="ui buttons">
        <button id="step-4a-tips-btn" class="ui green button">
          Toon tip
        </button>
        <div class="or" data-text="of"></div>
        <button id="step-4a-resign-btn" class="ui red button">
          Geef op
        </button>
      </div>
</span>

<!-- Step success -->
<span id="step-4a-success">
  <span class="congrats">Gefeliciteerd!</span>
  <p> Het leek misschien raar dat dit zo een makkelijke opgave was, maar er zit meer
      achter! Wat als we je nu vertelden dat de regel die nagaat of je three of a kind
      hebt nooit zal gevuurd worden? Dit komt omdat de eerste regel vuurt indien
      er twee kaarten dezelfde rank hebben. Bij een three of a kind is dit ook zo,
      dus indien de speler three of a kind heeft zal de eerste voorwaarde altijd vuren
      en zal het programma dus nooit aan de tweede regel beginnen! In de volgende stap
      zullen we dit proberen op te lossen. </p>
      <button class="ui small grey button" onclick="step4AChecker.next()">
        Volgende stap!
      </button>
</span>

<!-- Step fail -->
<span id="step-4a-fail">
  <span class="congrats">Oops!</span>
  <p> We laten jou dan wel de oplossing zien, maar we raden toch aan om deze
      stap opnieuw te proberen. Het is belangrijk dat je de stappen zelf maakt
      om zo vertrouwd te raken met het maken van verschillende regels. </p>
  <div><img id="step-4a-solution-preview" width='150' class="solution" src="tutorials/4a/solution.png" />
  </div>
  <button id="step-4a-restart-btn" class="ui small grey button">
    Probeer opnieuw!
  </button>
</span>

<!-- Step tips -->
<div id="step-4a-tips" class="ui dimmer">
  <div class="content">
    <div class="center">
      <h2 class="ui inverted icon header">
        <i class="help icon"></i>
        Tip
      </h2>
      <p class="diminfo"> Je kan het huidige if statement gewoon kopiÃ«ren en er
          onder plakken. Hierna kan je nog een derde kaart toevoegen en ervoor
          zorgen dat ook deze rank tot groep 1 behoort! Vergeet niet om daarna nog
          het tweede (geneste) if statement te verwijderen. </p>
      <div id="step-4a-hide-tips-btn" class="ui grey button">
        Bedankt!
      </div>
    </div>
  </div>
</div>

<script>

  /**
   *  Shows the description div and hides all others, updates CSS.
   */
  var show4ADescription = function() {
    $('#step-4a-description').show();
    $('#step-4a-success').hide();
    $('#step-4a-fail').hide();
    $('#bargraph').addClass('tutorialinfo');
    $('#bargraph').removeClass('tutorialsuccess');
    $('#bargraph').removeClass('tutorialfailed');
    $('#step-4a-tips').dimmer('hide');
  }

  /**
   *  Shows the success div and hides all others, updates CSS.
   */
  var show4ASuccess = function() {
    $('#step-4a-description').hide();
    $('#step-4a-success').show();
    $('#step-4a-fail').hide();
    $('#bargraph').removeClass('tutorialinfo');
    $('#bargraph').addClass('tutorialsuccess');
    $('#bargraph').removeClass('tutorialfailed');
    $('#step-4a-tips').dimmer('hide');
  }

  /**
   *  Shows the fail div and hides all others, updates CSS.
   */
  var show4AFail = function() {
    $('#step-4a-description').hide();
    $('#step-4a-success').hide();
    $('#step-4a-fail').show();
    $('#bargraph').removeClass('tutorialinfo');
    $('#bargraph').removeClass('tutorialsuccess');
    $('#bargraph').addClass('tutorialfailed');
    $('#step-4a-tips').dimmer('hide');
  }

  /**
   *  Shows the tips view.
   */
  var show4ATips = function() {
    $('#step-4a-tips').dimmer('show');
  }

  /**
   *  Hides the tips view.
   */
  var hide4ATips = function() {
    $('#step-4a-tips').dimmer('hide');
  }

  /**
   *  Checks if the step is completed and makes sure it does not happen
   *  multiple times.
   */
  var step4AChecker = {
    isCompleted: false,
    complete: function() {
      if (!this.isCompleted) {
        UIHANDLER.disableFullscreenWorkspace();
        show4ASuccess();
      }
      this.isCompleted = true;
    },
    next: function() {
      show4ADescription();
      $('#bargraph').load('tutorials/4b/main.html');
    }
  }

  /**
   *  Add listener to check if the new blocks are correct for this step.
   */
  var solution4A1;
  var solution4A2;
  $.get('tutorials/4a/solution1.xml', function(data) {
    solution4A1 = data;
    $.get('tutorials/4a/solution2.xml', function(data) {
      solution4A2 = data;
      workspace.addChangeListener(function() {
        var xml = Blockly.Xml.workspaceToDom(workspace);
        var provided = Blockly.Xml.domToText(xml);
        if (BlockChecker.equals(provided, solution4A1) || BlockChecker.equals(provided, solution4A2)) { step4AChecker.complete(); }
      });
    });
  });

  $('#step-4a-tips-btn').click(function(e) {
    show4ATips();
  });

  $('#step-4a-hide-tips-btn').click(function(e) {
    hide4ATips();
  });

  $('#step-4a-resign-btn').click(function(e) {
    show4AFail();
  });

  $('#step-4a-restart-btn').click(function(e) {
    show4ADescription();
  });

  $('#step-4a-solution-preview').click(function(e) {
    $('#solution-zoom-img').attr('src', 'tutorials/4a/solution.png');
    $('#solution-zoom').dimmer('show');
  });

</script>
