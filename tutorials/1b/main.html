
<!-- Step title -->
<h1>Stap 1b</h1>

<!-- Step description -->
<span id="step-1b-description">
  <p> We hebben zonet een regel gemaakt die callt wanneer het preflop is. Een
      belangrijke eigenschap van programma's is dat wanneer er niet voldaan is
      aan een bepaalde eigenschap de code er onder verder wordt uitgevoerd.
      Probeer nu met dit in het achterhoofd de regel aan te passen, zodat als het
      <b>niet preflop</b> is, we zullen <b>folden</b>. Tip: dit kan dus met maar
      één enkel block toe te voegen! </p>
      <div class="ui buttons">
        <button id="step-1b-tips-btn" class="ui green button">
          Toon tip
        </button>
        <div class="or" data-text="of"></div>
        <button id="step-1b-resign-btn" class="ui red button">
          Geef op
        </button>
      </div>
</span>

<!-- Step success -->
<span id="step-1b-success">
  <span class="congrats">Gefeliciteerd!</span>
  <p> Dat was makkelijk, niet? Dit is een zeer belangrijke eigenschap dus het
      is belangrijk dat je dit goed door hebt. Wanneer we dit in meer
      geavanceerde regels willen gebruiken, is het dus mogelijk om verschillende
      if statements onder elkaar te klikken. Op deze manier, wanneer de eerste
      voorwaarde niet voldaan is, wordt de tweede nagegaan, enzoverder. In de
      stap 1c zullen we kaart situaties koppelen aan de voorwaarde van een if
      statement. </p>
      <button class="ui small grey button" onclick="step1BChecker.next()">
        Volgende stap!
      </button>
</span>

<!-- Step fail -->
<span id="step-1b-fail">
  <span class="congrats">Oops!</span>
  <p> We laten jou dan wel de oplossing zien, maar we raden toch aan om deze
      stap opnieuw te proberen. Het is belangrijk dat je de stappen zelf maakt
      om zo vertrouwd te raken met het maken van verschillende regels. </p>
      <div><img width='150' class="solution" src="tutorials/1b/solution.png" />
      </div>
      <button id="step-1b-restart-btn" class="ui small grey button">
        Probeer opnieuw!
      </button>
</span>

<!-- Step tips -->
<div id="step-1b-tips" class="ui dimmer">
  <div class="content">
    <div class="center">
      <h2 class="ui inverted icon header">
        <i class="help icon"></i>
        Tip
      </h2>
      <p class="diminfo"> Het is mogelijk om de fold actie gewoon onder het if
          statement te hangen! Wanneer de voorwaarde van het if statement nu
          niet wordt gevuurd, zal het gewoon er onder verder gaan!  </p>
      <div id="step-1b-hide-tips-btn" class="ui grey button">
        Bedankt!
      </div>
    </div>
  </div>
</div>



<script>

  /**
   *  Shows the description div and hides all others, updates CSS.
   */
  var show1BDescription = function() {
    $('#step-1b-description').show();
    $('#step-1b-success').hide();
    $('#step-1b-fail').hide();
    $('#bargraph').addClass('tutorialinfo');
    $('#bargraph').removeClass('tutorialsuccess');
    $('#bargraph').removeClass('tutorialfailed');
    $('#step-1b-tips').dimmer('hide');
  }

  /**
   *  Shows the success div and hides all others, updates CSS.
   */
  var show1BSuccess = function() {
    $('#step-1b-description').hide();
    $('#step-1b-success').show();
    $('#step-1b-fail').hide();
    $('#bargraph').removeClass('tutorialinfo');
    $('#bargraph').addClass('tutorialsuccess');
    $('#bargraph').removeClass('tutorialfailed');
    $('#step-1b-tips').dimmer('hide');
  }

  /**
   *  Shows the fail div and hides all others, updates CSS.
   */
  var show1BFail = function() {
    $('#step-1b-description').hide();
    $('#step-1b-success').hide();
    $('#step-1b-fail').show();
    $('#bargraph').removeClass('tutorialinfo');
    $('#bargraph').removeClass('tutorialsuccess');
    $('#bargraph').addClass('tutorialfailed');
    $('#step-1b-tips').dimmer('hide');
  }

  /**
   *  Shows the tips view.
   */
  var show1BTips = function() {
    $('#step-1b-tips').dimmer('show');
  }

  /**
   *  Hides the tips view.
   */
  var hide1BTips = function() {
    $('#step-1b-tips').dimmer('hide');
  }

  /**
   *  Checks if the step is completed and makes sure it does not happen
   *  multiple times.
   */
  var step1BChecker = {
    isCompleted: false,
    complete: function() {
      if (!this.isCompleted) {
        if(isFullscreenWorkspace()) { toggleFullscreenWorkspace(); }
        show1BSuccess();
      }
      this.isCompleted = true;
    },
    next: function() {
      show1BDescription();
      $('#bargraph').load('tutorials/1c/main.html');
    }
  }

  /**
   *  Add listener to check if the new blocks are correct for this step.
   */
  var solution1B;
  $.get('tutorials/1b/solution.xml', function(data) {
    solution1B = data;
    workspace.addChangeListener(function () {
      var xml = Blockly.Xml.workspaceToDom(workspace);
      var provided = Blockly.Xml.domToText(xml);
      if (BlockChecker.equals(provided, solution1B)) { step1BChecker.complete(); }
    });
  });

  $('#step-1b-tips-btn').click(function(e) {
    show1BTips();
  });

  $('#step-1b-hide-tips-btn').click(function(e) {
    hide1BTips();
  });

  $('#step-1b-resign-btn').click(function(e) {
    show1BFail();
  });

  $('#step-1b-restart-btn').click(function(e) {
    show1BDescription();
  });

</script>
